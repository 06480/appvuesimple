<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>APP Vue Deezer</title>
  </head>
  <style>
    li {
      list-style-type: none;
    }
    [v-cloak] {
      display: none;
    }
  </style>
  <body>
    <div v-cloak id="test">
      <h1>Les styles musicaux en fonction de leur ID deezer</h1>
      <template v-for="genre in genres">
        <input
          type="radio"
          :id="genre"
          :value="genre"
          name="genre"
          v-model="currentGenre"
        />
        <label :for="genre">{{ genre }}</label>
      </template>
      <ul v-if="genre?.name">
        <li>{{genre.name}}</li>
        <li>
          <img :src="genre.picture" alt="img" />
        </li>
      </ul>
    </div>

    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://unpkg.com/vue@3"></script>
    <script>
      const apiURL = "https://api.deezer.com/genre/";

      Vue.createApp({
        data() {
          return {
            genres: [
              "132",
              "457",
              "116",
              "152",
              "113",
              "165",
              "85",
              "106",
              "466",
              "144",
              "129",
              "52",
              "84",
              "98",
              "173",
              "463",
              "169",
              "153",
              "197",
              "2",
              "12",
              "16",
              "75",
              "81",
            ],
            currentGenre: "",
            genre: null,
          };
        },

        watch: {
          currentGenre: "fetchData",
        },

        methods: {
          fetchData: function () {
            const self = this;
            axios
              .get(apiURL + self.currentGenre)
              .then(function (response) {
                console.log(response.data, "dataAsked");
                self.genre = response.data;
              })
              .catch(function (error) {
                console.log(error);
              });
          },
        },
      }).mount("#test");
    </script>
  </body>
</html>
